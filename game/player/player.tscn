[gd_scene load_steps=10 format=3 uid="uid://bvopkx5b76dd6"]

[ext_resource type="Script" path="res://player/player.gd" id="1_0evvo"]
[ext_resource type="AudioStream" uid="uid://bomxwua8k3g27" path="res://assets/sounds/bump.wav" id="2_ruvyn"]
[ext_resource type="PackedScene" uid="uid://bw8338ilrtcwc" path="res://components/trail/trail.tscn" id="3_1tkx3"]
[ext_resource type="AudioStream" uid="uid://ombi0lwi7cik" path="res://assets/sounds/ouch.wav" id="4_1afhd"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_brsdm"]
bounce = 0.75

[sub_resource type="CircleShape2D" id="CircleShape2D_vb2vq"]
radius = 12.0

[sub_resource type="CircleShape2D" id="CircleShape2D_ewefk"]
radius = 8.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_0y18g"]
random_pitch = 1.5
random_volume_offset_db = 10.0
streams_count = 1
stream_0/stream = ExtResource("2_ruvyn")
stream_0/weight = 1.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_cv0ua"]
random_pitch = 1.1
random_volume_offset_db = 10.0
streams_count = 1
stream_0/stream = ExtResource("4_1afhd")
stream_0/weight = 1.0

[node name="Player" type="RigidBody2D" node_paths=PackedStringArray("bump_sound", "ouch_sound") groups=["player"]]
collision_layer = 18
mass = 2.0
physics_material_override = SubResource("PhysicsMaterial_brsdm")
gravity_scale = 0.0
max_contacts_reported = 4
contact_monitor = true
constant_torque = 50.0
script = ExtResource("1_0evvo")
bump_sound = NodePath("Bump")
ouch_sound = NodePath("Ouch")

[node name="Trail" parent="." instance=ExtResource("3_1tkx3")]
width = 12.0
gradient = null

[node name="Shape" type="Polygon2D" parent="."]
polygon = PackedVector2Array(-7, -4, -4, -7, 0, -6, 4, -7, 7, -4, 6, 0, 7, 4, 4, 7, 0, 6, -4, 7, -7, 4, -6, 0)

[node name="Fill" type="Polygon2D" parent="Shape"]
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(-5, -3, -3, -5, 0, -4, 3, -5, 5, -3, 4, 0, 5, 3, 3, 5, 0, 4, -3, 5, -5, 3, -4, 0)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="."]
polygon = PackedVector2Array(-7, -4, -4, -7, 0, -6, 4, -7, 7, -4, 6, 0, 7, 4, 4, 7, 0, 6, -4, 7, -7, 4, -6, 0)

[node name="Bumper" type="Area2D" parent="."]
collision_layer = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="Bumper"]
shape = SubResource("CircleShape2D_vb2vq")

[node name="OwieDetector" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="OwieDetector"]
shape = SubResource("CircleShape2D_ewefk")

[node name="Bump" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_0y18g")
bus = &"sfx"

[node name="Ouch" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_cv0ua")
volume_db = 10.0
pitch_scale = 0.5
bus = &"sfx"

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="body_entered" from="Bumper" to="." method="_on_bumper_body_entered"]
[connection signal="area_entered" from="OwieDetector" to="." method="_on_owie_detector_area_entered"]
